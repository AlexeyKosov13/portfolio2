var isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}};window.onload=function(){document.addEventListener("click",(function(e){const t=e.target;window.innerWidth>768&&isMobile.any()&&(t.classList.contains("menu_arrow")&&t.closest(".menu_item").classList.toggle("_hover"),!t.closest(".menu_item")&&document.querySelectorAll(".menu_item._hover").length>0&&_removeClasses(document.querySelectorAll(".menu_item._hover"),"_hover"));t.classList.contains("search-form_icon")&&document.querySelector(".search_form").classList.toggle("_active")}))};let modal=document.querySelector(".modalWindow"),img=document.querySelectorAll(".popup_img"),close=document.querySelector(".close"),popup=document.querySelector(".popup");for(let e=0;e<img.length;e++)img[e].addEventListener("click",(function(){modal.style.display="block",popup.src=this.id}));function init(){var e=new ymaps.Map("map",{center:[55.76,37.64],zoom:7,controls:["zoomControl"],behaviors:["drag"]}),t=document.querySelector(".myadress").innerHTML;console.log(t),ymaps.geocode(t,{results:1}).then((function(t){var o=t.geoObjects.get(0),n=(o.geometry.getCoordinates(),o.properties.get("boundedBy"));o.options.set("preset","islands#darkBlueDotIconWithCaption"),o.properties.set("iconCaption",o.getAddressLine()),myPlacemark=new ymaps.Placemark(o.geometry.getCoordinates(),{hintContent:"Собственный значок метки",balloonContent:"Это красивая метка"},{iconLayout:"default#image",iconImageHref:"../img/baloon.png",iconImageSize:[60,60],iconImageOffset:[-40,-38]}),e.geoObjects.add(myPlacemark),e.setBounds(n,{checkZoomRange:!0})}))}close.onclick=function(){modal.style.display="none"},window.onclick=function(e){e.target==modal&&(modal.style.display="none")},ymaps.ready(init),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll("[data-modal]"),t=document.querySelector("[data-close]"),o=document.querySelector(".modal");function n(){o.classList.add("show"),o.classList.remove("hide"),document.body.style.overflow="hidden",clearInterval(i)}function s(e){o.classList.remove("show"),o.classList.add("hide"),document.body.style.overflow=""}e.forEach(e=>{e.addEventListener("click",n)}),t.addEventListener("click",s),o.addEventListener("click",e=>{e.target===o&&s()}),document.addEventListener("keydown",e=>{"Escape"===e.code&&o.classList.contains("show")&&s()});const i=setTimeout(n,6e3);window.addEventListener("scroll",(function e(){window.pageYOffset+document.documentElement.clientHeight>=document.documentElement.scrollHeight&&(n(),window.removeEventListener("scroll",e))}));document.querySelectorAll("form").forEach(e=>{var t;(t=e).addEventListener("submit",e=>{e.preventDefault();const o=document.createElement("img");o.src=message.loading,o.style.cssText="\n            display: block;\n            margin: 0 auto;\n            ",t.insertAdjacentElement("afterend",o);const n=new FormData(t);(async(e,t)=>{const o=await fetch(e,{method:"POST",headers:{"Content-type":"application/json"},body:t});return await o.json()})("http://localhost:3000/requests",JSON.stringify(Object.fromEntries(n.entries()))).then(e=>{console.log(e),r(message.success),o.remove()}).catch(()=>{r(message.failure)}).finally(()=>{t.reset()})})});function r(e){const t=document.querySelector(".modal__dialog");t.classList.add("hide"),n();const o=document.createElement("div");o.classList.add("modal_dialog"),o.innerHTML=`\n            <div class = 'modal__content'>\n             <div class = "modal__close" data-close>x</div>\n             <div class = 'modal__title'> ${e}</div>\n            </div>  \n        `,document.querySelector(".modal").append(o),setTimeout(()=>{o.remove(),t.classList.add("show"),t.classList.remove("hide"),s()},8e3)}function c(e){return e>0&&e<10?"0"+e:e}document.querySelector(".promo_endtime").innerHTML+="2021-11-15",function(e,t){const o=document.querySelector(e),n=o.querySelector("#days"),s=o.querySelector("#hours"),i=o.querySelector("#minutes"),r=o.querySelector("#seconds"),a=setInterval((function(){const e=function(e){const t=Date.parse(e)-Date.parse(new Date);return{total:t,days:Math.floor(t/864e5),hours:Math.floor(t/36e5%24),minutes:Math.floor(t/6e4%60),seconds:Math.floor(t/1e3%60)}}(t);n.innerHTML=c(e.days),s.innerHTML=c(e.hours),i.innerHTML=c(e.minutes),r.innerHTML=c(e.seconds),e.timer<=0&&clearInterval(a)}),1e3)}(".timer","2021-11-15")});